承知しました。
**体験型会計学習アプリ**の機能要件を、**一切省略せず、上から順に詳細に**まとめます。
「ユーザー管理」「レッスン・問題」「ゲーミフィケーション」「管理機能」など、各機能を細分化し、ユーザー体験・管理者体験の両面から網羅します。

---

# 体験型会計学習アプリ 機能要件ドキュメント

---

## 1. ユーザー管理

### 1-1. ユーザー登録

-   メールアドレス、パスワード、ユーザー名で新規登録
-   入力内容のバリデーション（メール形式、パスワード強度、重複チェック）
-   パスワードはハッシュ化して保存
-   登録完了後、自動ログインまたはログイン画面へ遷移

### 1-2. ログイン/ログアウト

-   メールアドレス・パスワードでログイン
-   入力内容のバリデーション
-   ログイン状態はセッションまたは JWT で管理
-   ログアウトでセッション/JWT を破棄

### 1-3. パスワードリセット（任意）

-   メールアドレス入力でリセットリンク送信
-   リンクから新パスワード設定

### 1-4. プロフィール管理

-   ユーザー名・メールアドレスの表示・編集
-   現在のバッジ・進捗状況の表示

### 1-5. 進捗管理

-   レッスンごとの進捗（クリア状況、正答率、最終回答日時など）を記録・表示
-   全体の学習進捗バー表示

---

## 2. レッスン・問題

### 2-1. レッスン一覧

-   レッスンごとにタイトル、説明、難易度、進捗（未着手/途中/完了）を一覧表示
-   レッスンは進捗順や難易度順でソート・フィルタ可能

### 2-2. レッスン詳細

-   レッスンの概要、学習目標、含まれる問題数の表示
-   レッスン開始ボタン

### 2-3. 問題出題

-   レッスン内の問題を順次出題
-   問題タイプ：
    -   単一選択式（ラジオボタン）
    -   複数選択式（チェックボックス）
    -   ドラッグ&ドロップ式（仕訳パーツの組み立て）
-   問題文、選択肢、補足説明の表示
-   問題ごとにタイマー（任意）やヒントボタン

### 2-4. 回答・判定

-   回答送信時、即時に正誤判定
-   正解・不正解のフィードバック表示
-   不正解の場合、正答と詳細な解説を表示
-   回答内容・判定を履歴として保存

### 2-5. 問題解説

-   各問題に「なぜその答えになるのか」「会計的な考え方」の詳細解説
-   関連用語やポイントをポップアップやリンクで補足

### 2-6. レッスン完了

-   レッスン内全問題クリアで「完了」状態に
-   レッスンクリア時にバッジやポイントを付与

### 2-7. 復習・再挑戦

-   間違えた問題のみ再挑戦
-   レッスン単位で再受講可能

---

## 3. ゲーミフィケーション

### 3-1. バッジシステム

-   レッスンクリア、全問正解、連続ログイン、初回チャレンジなどでバッジ付与
-   バッジ一覧・獲得履歴の表示
-   未獲得バッジの条件表示

### 3-2. ポイント・スコア

-   問題正解・連続正解・初回クリアなどでポイント付与
-   ポイント累計・ランキング表示（任意）

### 3-3. 進捗グラフ

-   レッスンごとの進捗バー
-   全体進捗の円グラフや棒グラフ

### 3-4. モチベーション維持

-   日替わりチャレンジ（任意）
-   目標設定と達成通知（任意）

---

## 4. 管理機能（管理者専用）

### 4-1. レッスン管理

-   レッスンの新規作成・編集・削除
-   タイトル、説明、難易度、順序、問題リストの編集

### 4-2. 問題管理

-   問題の新規作成・編集・削除
-   問題文、選択肢、正答、解説、ヒントの登録
-   問題タイプ（単一選択/複数選択/ドラッグ&ドロップ）の設定

### 4-3. バッジ管理

-   バッジの新規作成・編集・削除
-   バッジ名、説明、獲得条件の設定

### 4-4. ユーザー管理（任意）

-   ユーザー一覧表示、進捗・バッジ状況の確認

---

## 5. 共通機能・UI/UX

### 5-1. レスポンシブデザイン

-   PC、タブレット、スマホに最適化

### 5-2. アクセシビリティ

-   キーボード操作対応
-   色覚バリアフリー配色

### 5-3. ヘルプ・サポート

-   使い方ガイド、FAQ
-   お問い合わせフォーム（任意）

### 5-4. エラーハンドリング

-   入力エラー、通信エラー時のユーザー通知

### 5-5. セキュリティ

-   パスワードのハッシュ化
-   認証・認可（管理者/一般ユーザーの権限分離）
-   API への不正アクセス対策

---

## 6. API 要件

### 6-1. 認証系

-   新規登録、ログイン、ログアウト、パスワードリセット

### 6-2. ユーザー系

-   ユーザー情報取得・更新
-   進捗・バッジ・ポイント取得

### 6-3. レッスン・問題系

-   レッスン一覧・詳細取得
-   問題一覧・詳細取得
-   回答送信・判定
-   回答履歴取得

### 6-4. 管理系

-   レッスン/問題/バッジの CRUD
-   ユーザー一覧・進捗取得（任意）

---

## 7. データモデル

-   **User**: id, name, email, passwordHash, progress, badges, points, createdAt, updatedAt
-   **Lesson**: id, title, description, level, order, questions[]
-   **Question**: id, lessonId, type, content, choices, correctAnswer, explanation, hint
-   **Answer**: id, userId, questionId, userAnswer, isCorrect, answeredAt
-   **Badge**: id, name, description, condition
-   **Progress**: userId, lessonId, status, correctCount, totalCount, lastAnsweredAt

---

## 8. ページ・UI 要件

-   トップページ：サービス紹介、ログイン/新規登録
-   ダッシュボード：進捗、バッジ、レッスン一覧
-   レッスン詳細：レッスン説明、問題開始
-   問題ページ：問題文、選択肢、回答、解説
-   バッジ一覧：獲得・未獲得バッジ
-   プロフィール：ユーザー情報、進捗
-   管理ページ：レッスン・問題・バッジ管理

---

## 9. 追加要件（開発・運用）

-   DB は Prisma + SQLite/PostgreSQL
-   API は Next.js App Router の route.ts で実装
-   状態管理は useState/useContext
-   テストデータ投入用スクリプト
-   CI/CD（任意）

---

**以上が、体験型会計学習アプリの一切省略のない機能要件一覧です。
ご要望に応じて、各 API 仕様や画面 UI 設計、ER 図、ワイヤーフレーム等も追加可能です。**
